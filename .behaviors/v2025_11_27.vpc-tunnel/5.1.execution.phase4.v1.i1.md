# execution: phase 4 - RDS operations

## status: complete âœ…

## summary

created RDS cluster operations for getting RDS cluster metadata:

- `castToDeclaredAwsRdsCluster` - casts AWS SDK DBCluster to domain object
- `getRdsCluster` - retrieves RDS cluster by name (unique key)

## files created

### domain operations

1. `src/domain.operations/rdsCluster/castToDeclaredAwsRdsCluster.ts`
   - casts AWS SDK `DBCluster` type to `DeclaredAwsRdsCluster`
   - extracts `arn`, `name`, `host.writer`, `host.reader`, `port`, `status`
   - failfasts if `DBClusterIdentifier` is not defined
   - falls back reader endpoint to writer if not present

2. `src/domain.operations/rdsCluster/getRdsCluster.ts`
   - lookup by unique (name) via `DescribeDBClustersCommand`
   - handles `DBClusterNotFoundFault` gracefully by returning null
   - throws on other unexpected errors

### unit tests

1. `src/domain.operations/rdsCluster/castToDeclaredAwsRdsCluster.test.ts` - 7 tests
2. `src/domain.operations/rdsCluster/getRdsCluster.test.ts` - 6 tests

## verification

```
npm run test:types  # passes
npm run test:unit --testPathPattern="rdsCluster"  # 21 tests pass (including DeclaredAwsRdsCluster domain object tests)
```

## notes

- `getRdsCluster` only supports lookup by unique (name), not by primary (arn) since RDS API requires cluster identifier for lookup
- reader endpoint falls back to writer endpoint if not present (single-writer clusters)
- cluster endpoint may be undefined if cluster is in 'creating' status

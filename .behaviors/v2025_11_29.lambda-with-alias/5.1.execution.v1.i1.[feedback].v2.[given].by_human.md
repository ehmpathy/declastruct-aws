emit your response to the feedback into .behaviors/v2025_11_29.lambda-with-alias/5.1.execution.v1.i1.[feedback].v2.[taken].by_robot.md

1. emit your response checklist
2. exec your response plan
3. emit your response checkoffs into the checklist

---

first, bootup your mechanics briefs again

npx rhachet roles boot --repo ehmpathy --role mechanic

---


# blocker.1

castIntoDomainPrincipal

each castInto and castFrom should be in its own file

fix this one and any others like it

also, it should be called castIntoDeclaredAwsXyz

not DomainPrinciple

but DeclaredAws*


---

# blocker.2

each castFromXyz should be into each one of its files

---

# blocker.3

DeclaredAwsIamPolicyDocument should be an independent domain object

---

# blocker.4

const trustPolicy = {
        Statement: trustPolicyDoc.Statement.map(
          (stmt: {
            Sid?: string;
            Effect: string;
            Principal?: unknown;
            Action: string | string[];
            Resource: string | string[];
            Condition?: Record<string, Record<string, string | string[]>>;
          }) => ({
            sid: stmt.Sid,
            effect: stmt.Effect as 'Allow' | 'Deny',
            principal: castIntoDomainPrincipal(stmt.Principal),
            action: stmt.Action,
            resource: stmt.Resource,
            condition: stmt.Condition,
          }),
        ),


  this should have been converted to a castIntoDeclaredAwsXYZ

  not an inline cast


----

# blocker.5

same here


      // normalize aws Statement format to our domain format
      const normalizedDocument = {
        Statement: policyDocument.Statement.map(
          (stmt: {
            Sid?: string;
            Effect: string;
            Principal?: unknown;
            Action: string | string[];
            Resource: string | string[];
            Condition?: Record<string, Record<string, string | string[]>>;
          }) => ({
            sid: stmt.Sid,
            effect: stmt.Effect as 'Allow' | 'Deny',
            principal: stmt.Principal,
            action: stmt.Action,
            resource: stmt.Resource,
            condition: stmt.Condition,
          }),
        ),
      };

----

# blocker.6

getLambdas => getAllLambdas
getLambda => getOneLambda

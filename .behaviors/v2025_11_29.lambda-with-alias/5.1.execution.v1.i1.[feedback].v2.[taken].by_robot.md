# feedback v2 response checklist

## blockers

- [x] blocker.1: split castIntoDomainPrincipal into own file, rename to castIntoDeclaredAwsIamPrincipal
- [x] blocker.2: split each castFromXyz into own files
- [x] blocker.3: create DeclaredAwsIamPolicyDocument as independent domain object
- [x] blocker.4: convert inline trust policy cast in getIamRole to use castIntoDeclaredAwsIamPolicyDocument
- [x] blocker.5: convert inline policy document cast in getIamRolePolicy to use castIntoDeclaredAwsIamPolicyDocument
- [x] blocker.6: rename getLambdas → getAllLambdas, getLambda → getOneLambda

## progress

- started: 2025-11-29
- completed: 2025-11-29

## summary of changes

### blocker.1: castIntoDeclaredAwsIamPrincipal
- created `src/domain.operations/iamRole/castIntoDeclaredAwsIamPrincipal.ts`
- moved function from inline in getIamRole.ts to dedicated file
- renamed from `castIntoDomainPrincipal` to `castIntoDeclaredAwsIamPrincipal`

### blocker.2: split castFrom files
- created `src/domain.operations/iamRole/castFromDeclaredAwsIamPrincipal.ts`
- created `src/domain.operations/iamRole/castFromDeclaredAwsIamPolicyStatement.ts`
- created `src/domain.operations/iamRole/castFromDeclaredAwsIamPolicyDocument.ts`
- each cast function now has its own file

### blocker.3: DeclaredAwsIamPolicyDocument domain object
- created `src/domain.objects/DeclaredAwsIamPolicyDocument.ts`
- domain literal with `statements: DeclaredAwsIamPolicyStatement[]`
- used for trust policies and inline permission policies

### blocker.4: castIntoDeclaredAwsIamPolicyDocument in getIamRole
- created `src/domain.operations/iamRole/castIntoDeclaredAwsIamPolicyStatement.ts`
- created `src/domain.operations/iamRole/castIntoDeclaredAwsIamPolicyDocument.ts`
- updated getIamRole.ts to use castIntoDeclaredAwsIamPolicyDocument
- updated castIntoDeclaredAwsIamRole to accept DeclaredAwsIamPolicyDocument

### blocker.5: castIntoDeclaredAwsIamPolicyDocument in getIamRolePolicy
- updated getIamRolePolicy.ts to use castIntoDeclaredAwsIamPolicyDocument
- updated castIntoDeclaredAwsIamRolePolicy to accept DeclaredAwsIamPolicyDocument

### blocker.6: rename lambda operations
- renamed `getLambda.ts` → `getOneLambda.ts`
- renamed `getLambdas.ts` → `getAllLambdas.ts`
- renamed all test files accordingly
- updated all imports and references across codebase
- updated exports in contract/sdks/index.ts

## verification

- TypeScript compiles cleanly
- All 172 unit tests pass

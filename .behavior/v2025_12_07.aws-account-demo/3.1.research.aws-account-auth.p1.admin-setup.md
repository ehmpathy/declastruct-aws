# bootstrap aws identity center (sso) + admin role
minimal, safe guide for new aws accounts

---

## .what
set up **aws identity center (sso)** and create an **administrator role** so you can authenticate via:

\`\`\`
aws sso login
\`\`\`

this avoids ever creating a long-lived root access key.

---

## .why
- root credentials should never be used except for bootstrap actions
- no access keys → no secrets to rotate or leak
- identity center gives secure, MFA-protected admin access
- you must do this before creating any github oidc roles or automation roles

---

# 1. sign in as root
visit:

https://signin.aws.amazon.com/root

enable **mfa for the root user**:

``iam → users → root user → security credentials → mfa``

root is now secured and ready to bootstrap identity center.

---

# 2. enable aws identity center
navigate to:

``aws console → iam identity center``

click:

``enable``

choose **aws identity center directory (default)** unless you want external identity providers.

identity center will create:
- the identity directory
- the “aws reserved” application
- permission sets capability

---

# 3. create an admin permission set
identity center → **permission sets** → create permission set

\`\`\`
name: AdministratorAccess
type: predefined
policy: AdministratorAccess
session duration: 1 hour (or 4 hours if preferred)
require mfa: yes
\`\`\`

this permission set will define the admin role that users assume.

---

# 4. create your admin user in identity center
identity center → **users** → create user

\`\`\`
email: you@yourdomain.com
username: you
name: your name
\`\`\`

invite the user. you will receive a sign-in email.

---

# 5. assign the admin user to the account
identity center → **assign users or groups**

select:

\`\`\`
target account: <your aws account>
permission set: AdministratorAccess
user: you
\`\`\`

click **assign**.

this creates an IAM role in your account of the form:

\`\`\`
AWSReservedSSO_AdministratorAccess_<random>
\`\`\`

this is your future admin role.

---

# 6. install & configure aws cli for sso
on your local machine:

\`\`\`
aws configure sso
\`\`\`

you will be prompted for:

\`\`\`
sso start url: https://YOURDOMAIN.awsapps.com/start
sso region: us-east-1 (or your chosen region)
sso account id: <your account id>
sso role name: AdministratorAccess
default region name: us-east-1
default output format: json
\`\`\`

this generates an **sso profile**, commonly named:

\`\`\`
[default]
\`\`\`

or

\`\`\`
[sso-admin]
\`\`\`

depending on what you choose.

---

# 7. sign in with identity center
you can now authenticate without root credentials:

\`\`\`
aws sso login
\`\`\`

verify:

\`\`\`
aws sts get-caller-identity
\`\`\`

you should see the `AWSReservedSSO_AdministratorAccess` role.

---

# 8. stop using root entirely
from now on:

- authenticate via identity center
- run \`aws sso login\` before CLI work
- root is only for emergencies and billing config

---

# next steps
now that admin access is bootstrapped, you can:

- create a **github oidc role** for ci/cd
- create **scps** if you plan to use organizations
- migrate all personal iam users to sso
- lock down or disable old key-based approaches

i can generate those next if you want a full pipeline-ready setup.

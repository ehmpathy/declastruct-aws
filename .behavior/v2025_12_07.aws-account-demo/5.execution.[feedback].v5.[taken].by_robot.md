# feedback response checklist (v5)

## blockers

- [x] blocker.1: `instanceArn` => `arn` in DeclaredAwsSsoInstance for consistency
- [x] blocker.2: use `refByUnique()` instead of adhoc `{ ... }` refs in provision files
- [x] blocker.3: remove fake primary key from DeclaredAwsSsoAccountAssignment (if no primary, remove it)
- [x] blocker.4: remove `| string` from target, use `Ref<typeof DeclaredAwsOrganizationAccount>` only
- [x] blocker.5: use `RefByUnique<typeof DeclaredAwsSsoInstance>` instead of `Ref<...>` for instance references
- [x] blocker.6: fix `delSsoAccountAssignment` to use ref-based input (not bags of words)
- [x] blocker.7: inline instance resolution, remove helper function
- [x] blocker.8: fix `getOne`/`getAll` operations to use standard `{ by: { unique | primary | ref } }` contract
- [x] blocker.9: fix `castIntoDeclaredAwsSsoPermissionSet` to use `(input: { ... })` instead of positional args
- [x] blocker.10: decompose `setSsoPermissionSet` update operations into sub-procedures

## verification

- [x] types pass
- [x] tests pass
- [x] build passes

---

# execution summary

All 10 blockers have been addressed:

1. **blocker.1**: Renamed `instanceArn` to `arn` in `DeclaredAwsSsoInstance` interface, primary key, and metadata

2. **blocker.2**: Updated provision files to use typed refs with `RefByUnique<typeof ...>` and `satisfies` pattern

3. **blocker.3**: Removed fake `primary = ['instance']` from `DeclaredAwsSsoAccountAssignment`

4. **blocker.4**: Changed `target` type from `Ref<...> | string` to just `Ref<typeof DeclaredAwsOrganizationAccount>`

5. **blocker.5**: Changed all `instance` properties from `Ref<typeof DeclaredAwsSsoInstance>` to `RefByUnique<typeof DeclaredAwsSsoInstance>`

6. **blocker.6**: Refactored `delSsoAccountAssignment` to use `{ by: PickOne<{ unique, ref }> }` pattern

7. **blocker.7**: Inlined instance resolution in all operation functions, removed `resolveInstanceArn` helper functions

8. **blocker.8**: Updated `getOneSsoAccountAssignment` to use `{ by: PickOne<{ unique, ref }> }` contract (assignments have no primary key)

9. **blocker.9**: Changed `castIntoDeclaredAwsSsoPermissionSet` to use `(input: { response, instance, policy, tags })` pattern

10. **blocker.10**: Decomposed `setSsoPermissionSet` update operations into separate files:
    - `setSsoPermissionSetBasicProperties.ts`
    - `setSsoPermissionSetManagedPolicies.ts`
    - `setSsoPermissionSetInlinePolicy.ts`
    - `setSsoPermissionSetTags.ts`
